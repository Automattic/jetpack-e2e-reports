{
  "uid" : "a91fb064efdcf788",
  "name" : "Can display different result formats",
  "fullName" : "Can display different result formats",
  "historyId" : "e4b5ee96e0f801846ffdc3a858c32dad",
  "time" : {
    "start" : 1635292172084,
    "stop" : 1635292172191,
    "duration" : 107
  },
  "description" : "\n### Test\n```typescript\nasync () => {\n  await (0, _reporters.testStep)(\"Can use minimal format\", async () => {\n    await homepage.goto(`${siteUrl}?result_format=minimal`);\n    await homepage.waitForPage();\n    await homepage.waitForNetworkIdle();\n    await homepage.focusSearchInput();\n    await homepage.enterQuery(\"random-string-1\");\n    await homepage.waitForSearchResponse();\n\n    expect(await homepage.isOverlayVisible()).toBeTruthy();\n    expect(await homepage.isResultFormat(\"is-format-minimal\")).toBeTruthy();\n  });\n  await (0, _reporters.testStep)(\"Can use product format\", async () => {\n    await homepage.goto(`${siteUrl}?result_format=product`);\n    await homepage.waitForPage();\n    await homepage.waitForNetworkIdle();\n    await homepage.focusSearchInput();\n    await homepage.enterQuery(\"random-string-2\");\n    await homepage.waitForSearchResponse();\n    expect(await homepage.isOverlayVisible()).toBeTruthy();\n    expect(await homepage.isResultFormat(\"is-format-product\")).toBeTruthy();\n    expect(await homepage.isProductImageVisible()).toBeTruthy();\n    expect(await homepage.isProductPriceVisible()).toBeTruthy();\n  });\n  await (0, _reporters.testStep)(\"Can use expanded format\", async () => {\n    await homepage.goto(`${siteUrl}?result_format=expanded&s=random-string-3`);\n    await homepage.waitForPage();\n    await homepage.waitForNetworkIdle();\n    expect(await homepage.isOverlayVisible()).toBeTruthy();\n    expect(await homepage.isResultFormat(\"is-format-expanded\")).toBeTruthy();\n    expect(await homepage.isExpandedImageVisible()).toBeTruthy();\n  });\n};\n\n```\n",
  "descriptionHtml" : "<h3>Test</h3>\n<pre><code class=\"language-typescript\">async () =&gt; {\n  await (0, _reporters.testStep)(&quot;Can use minimal format&quot;, async () =&gt; {\n    await homepage.goto(`${siteUrl}?result_format=minimal`);\n    await homepage.waitForPage();\n    await homepage.waitForNetworkIdle();\n    await homepage.focusSearchInput();\n    await homepage.enterQuery(&quot;random-string-1&quot;);\n    await homepage.waitForSearchResponse();\n\n    expect(await homepage.isOverlayVisible()).toBeTruthy();\n    expect(await homepage.isResultFormat(&quot;is-format-minimal&quot;)).toBeTruthy();\n  });\n  await (0, _reporters.testStep)(&quot;Can use product format&quot;, async () =&gt; {\n    await homepage.goto(`${siteUrl}?result_format=product`);\n    await homepage.waitForPage();\n    await homepage.waitForNetworkIdle();\n    await homepage.focusSearchInput();\n    await homepage.enterQuery(&quot;random-string-2&quot;);\n    await homepage.waitForSearchResponse();\n    expect(await homepage.isOverlayVisible()).toBeTruthy();\n    expect(await homepage.isResultFormat(&quot;is-format-product&quot;)).toBeTruthy();\n    expect(await homepage.isProductImageVisible()).toBeTruthy();\n    expect(await homepage.isProductPriceVisible()).toBeTruthy();\n  });\n  await (0, _reporters.testStep)(&quot;Can use expanded format&quot;, async () =&gt; {\n    await homepage.goto(`${siteUrl}?result_format=expanded&amp;s=random-string-3`);\n    await homepage.waitForPage();\n    await homepage.waitForNetworkIdle();\n    expect(await homepage.isOverlayVisible()).toBeTruthy();\n    expect(await homepage.isResultFormat(&quot;is-format-expanded&quot;)).toBeTruthy();\n    expect(await homepage.isExpandedImageVisible()).toBeTruthy();\n  });\n};\n\n</code></pre>\n",
  "status" : "broken",
  "statusMessage" : "assert.match(received, expected)\n\nExpected value match to:\n  /Success: .* has been activated./i\nReceived:\n  [Error: Command failed: pnpx jetpack docker --type e2e --name t1 wp -- jetpack module activate search --url=\"https://hard-bobcat-27.a8c-localtunnel.cyou\"\nError: There has been a critical error on this website.Learn more about troubleshooting WordPress. There has been a critical error on this website.\nCommand exited with status 255\n]\n\nDifference:\n\n  Comparing two different types of values. Expected regexp but received object.\n    at activateModules (/home/runner/work/jetpack/jetpack/tools/e2e-commons/env/prerequisites.js:186:10)\n    at runMicrotasks (<anonymous>)\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)\n    at ensureModulesState (/home/runner/work/jetpack/jetpack/tools/e2e-commons/env/prerequisites.js:170:3)\n    at buildPrerequisites (/home/runner/work/jetpack/jetpack/tools/e2e-commons/env/prerequisites.js:75:5)\n    at Object.build (/home/runner/work/jetpack/jetpack/tools/e2e-commons/env/prerequisites.js:54:4)\n    at /home/runner/work/jetpack/jetpack/projects/plugins/jetpack/tests/e2e/specs/search.test.js:26:3",
  "flaky" : false,
  "newFailed" : false,
  "beforeStages" : [ {
    "time" : { },
    "status" : "broken",
    "statusMessage" : "AssertionError",
    "statusTrace" : "The \"string\" argument must be of type string. Received type object (Error: Command failed: pnpx jetpack docker --type e2e --name t1 wp -- jetpack module activate search --url=\"https://hard-bobcat-27.a8c-localtunnel.cyou\"\nError: There has been a critical error on this website.Learn more about troubleshooting WordPress. There has been a critical error on this website.\nCommand exited with status 255\n\n    at ChildProcess.exithandler (node:child_process:397:12)\n    at ChildProcess.emit (node:events:390:28)\n    at maybeClose (node:internal/child_process:1064:16)\n    at Process.ChildProcess._handle.onexit (node:internal/child_process:301:5) {\n  killed: false,\n  code: 255,\n  signal: null,\n  cmd: 'pnpx jetpack docker --type e2e --name t1 wp -- jetpack module activate search --url=\"https://hard-bobcat-27.a8c-localtunnel.cyou\"'\n})",
    "steps" : [ ],
    "attachments" : [ {
      "uid" : "8183c277812e3c2e",
      "name" : "beforeAll - Search",
      "source" : "8183c277812e3c2e.png",
      "type" : "image/png",
      "size" : 251258
    }, {
      "uid" : "802a5da3c3374563",
      "name" : "1635292170189_beforeAll___Search.webm",
      "source" : "802a5da3c3374563.webm",
      "type" : "video/webm",
      "size" : 1449195
    } ],
    "parameters" : [ ],
    "stepsCount" : 0,
    "attachmentsCount" : 2,
    "shouldDisplayMessage" : true,
    "hasContent" : true
  } ],
  "testStage" : {
    "description" : "\n### Test\n```typescript\nasync () => {\n  await (0, _reporters.testStep)(\"Can use minimal format\", async () => {\n    await homepage.goto(`${siteUrl}?result_format=minimal`);\n    await homepage.waitForPage();\n    await homepage.waitForNetworkIdle();\n    await homepage.focusSearchInput();\n    await homepage.enterQuery(\"random-string-1\");\n    await homepage.waitForSearchResponse();\n\n    expect(await homepage.isOverlayVisible()).toBeTruthy();\n    expect(await homepage.isResultFormat(\"is-format-minimal\")).toBeTruthy();\n  });\n  await (0, _reporters.testStep)(\"Can use product format\", async () => {\n    await homepage.goto(`${siteUrl}?result_format=product`);\n    await homepage.waitForPage();\n    await homepage.waitForNetworkIdle();\n    await homepage.focusSearchInput();\n    await homepage.enterQuery(\"random-string-2\");\n    await homepage.waitForSearchResponse();\n    expect(await homepage.isOverlayVisible()).toBeTruthy();\n    expect(await homepage.isResultFormat(\"is-format-product\")).toBeTruthy();\n    expect(await homepage.isProductImageVisible()).toBeTruthy();\n    expect(await homepage.isProductPriceVisible()).toBeTruthy();\n  });\n  await (0, _reporters.testStep)(\"Can use expanded format\", async () => {\n    await homepage.goto(`${siteUrl}?result_format=expanded&s=random-string-3`);\n    await homepage.waitForPage();\n    await homepage.waitForNetworkIdle();\n    expect(await homepage.isOverlayVisible()).toBeTruthy();\n    expect(await homepage.isResultFormat(\"is-format-expanded\")).toBeTruthy();\n    expect(await homepage.isExpandedImageVisible()).toBeTruthy();\n  });\n};\n\n```\n",
    "status" : "broken",
    "statusMessage" : "assert.match(received, expected)\n\nExpected value match to:\n  /Success: .* has been activated./i\nReceived:\n  [Error: Command failed: pnpx jetpack docker --type e2e --name t1 wp -- jetpack module activate search --url=\"https://hard-bobcat-27.a8c-localtunnel.cyou\"\nError: There has been a critical error on this website.Learn more about troubleshooting WordPress. There has been a critical error on this website.\nCommand exited with status 255\n]\n\nDifference:\n\n  Comparing two different types of values. Expected regexp but received object.\n    at activateModules (/home/runner/work/jetpack/jetpack/tools/e2e-commons/env/prerequisites.js:186:10)\n    at runMicrotasks (<anonymous>)\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)\n    at ensureModulesState (/home/runner/work/jetpack/jetpack/tools/e2e-commons/env/prerequisites.js:170:3)\n    at buildPrerequisites (/home/runner/work/jetpack/jetpack/tools/e2e-commons/env/prerequisites.js:75:5)\n    at Object.build (/home/runner/work/jetpack/jetpack/tools/e2e-commons/env/prerequisites.js:54:4)\n    at /home/runner/work/jetpack/jetpack/projects/plugins/jetpack/tests/e2e/specs/search.test.js:26:3",
    "steps" : [ ],
    "attachments" : [ {
      "uid" : "b187fded5177926b",
      "name" : "1635292172144_Search___Can_display_different_result_formats.webm",
      "source" : "b187fded5177926b.webm",
      "type" : "video/webm",
      "size" : 1409
    } ],
    "parameters" : [ ],
    "stepsCount" : 0,
    "attachmentsCount" : 1,
    "shouldDisplayMessage" : true,
    "hasContent" : true
  },
  "afterStages" : [ {
    "time" : { },
    "status" : "passed",
    "steps" : [ ],
    "attachments" : [ ],
    "parameters" : [ ],
    "stepsCount" : 0,
    "attachmentsCount" : 0,
    "shouldDisplayMessage" : false,
    "hasContent" : false
  } ],
  "labels" : [ {
    "name" : "thread",
    "value" : "1"
  }, {
    "name" : "parentSuite",
    "value" : "specs"
  }, {
    "name" : "package",
    "value" : "specs"
  }, {
    "name" : "subSuite",
    "value" : "search.test.js"
  }, {
    "name" : "resultFormat",
    "value" : "allure2"
  } ],
  "parameters" : [ ],
  "links" : [ ],
  "hidden" : false,
  "retry" : false,
  "extra" : {
    "severity" : "normal",
    "retries" : [ ],
    "categories" : [ {
      "name" : "Test defects",
      "matchedStatuses" : [ ],
      "flaky" : false
    } ],
    "tags" : [ ]
  },
  "source" : "a91fb064efdcf788.json",
  "parameterValues" : [ ]
}