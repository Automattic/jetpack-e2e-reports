(this["webpackJsonpjetpack-e2e-reports"]=this["webpackJsonpjetpack-e2e-reports"]||[]).push([[0],{21:function(t,e,r){},23:function(t,e,r){},30:function(t,e,r){"use strict";r.r(e);var a=r(1),s=r.n(a),n=r(12),c=r.n(n),i=(r(21),r(22),r(23),r(13)),l=r(14),o=r(16),d=r(15),j=r(32),u=r(34),h=r(33),p=r(11),b=r(8),m=r(0),f=function(t){Object(o.a)(r,t);var e=Object(d.a)(r);function r(t){var a;return Object(i.a)(this,r),(a=e.call(this,t)).updateSorting=function(t,e){return a.setState({sortBy:t,isSortAsc:e})},a.state={data:{reports:[]},sortBy:"lastUpdate",isSortAsc:!1},a}return Object(l.a)(r,[{key:"componentDidMount",value:function(){var t=this;fetch("./summary.json",{headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(t){return t.json()})).then((function(e){t.setState({data:e})})).catch(console.log)}},{key:"sortTable",value:function(t,e){switch(t){case"name":return this.sortAlphabetically(e);case"lastUpdate":return this.sortByDate(e);case"statistic":return this.sortByStatus(e)}}},{key:"sortByDate",value:function(t){return this.state.data.reports.sort((function(e,r){return t?Date.parse(e.lastUpdate)-Date.parse(r.lastUpdate):Date.parse(r.lastUpdate)-Date.parse(e.lastUpdate)}))}},{key:"sortAlphabetically",value:function(t){return this.state.data.reports.sort((function(e,r){return t?e.name-r.name:r.name-e.name}))}},{key:"sortByStatus",value:function(t){return this.state.data.reports.sort((function(e,r){return t?e.statistic.failed+e.statistic.broken-(r.statistic.failed+r.statistic.broken):r.statistic.failed+r.statistic.broken-(e.statistic.failed+e.statistic.broken)}))}},{key:"renderReportLink",value:function(t,e,r){var a="https://automattic.github.io/jetpack-e2e-reports/".concat(t.name,"/report/"),s=t.name,n=t.name;if(e.pr_title){var c;c="(#".concat(e.pr_number,")"),n="".concat(e.pr_title," ").concat(c)}var i="https://github.com/Automattic/jetpack/tree/".concat(e.branch),l="https://github.com/Automattic/jetpack/pull/".concat(e.pr_number);return Object(m.jsxs)("ul",{className:"list-unstyled",children:[Object(m.jsxs)("li",{children:[Object(m.jsx)(p.a,{className:r?"failed":"passed",icon:r?b.c:b.a}),"\xa0",Object(m.jsxs)("a",{href:a,className:"report-link",target:"_blank",rel:"noreferrer",children:[n,Object(m.jsx)("br",{})]})]}),Object(m.jsx)("li",{children:Object(m.jsxs)("small",{children:["#",s," "," \u2022 ",Object(m.jsx)(p.a,{icon:b.b})," ",Object(m.jsx)("a",{href:i,target:"_blank",className:"report-link",rel:"noreferrer",children:e.branch}),e.pr_number?" \u2022 ":"",e.pr_number&&Object(m.jsxs)("a",{href:l,target:"_blank",className:"report-link",rel:"noreferrer",children:["PR ",e.pr_number]})]})})]})}},{key:"renderResults",value:function(t){var e=["failed","passed","total"].map((function(e,r){var a="failed"===e?t[e]+t.broken:t[e];return Object(m.jsxs)(j.a,{className:"label label-status-".concat(e),children:[e," ",a]},r)}));return Object(m.jsx)("div",{children:e})}},{key:"renderMetadataCell",value:function(t){var e="https://github.com/Automattic/jetpack/actions/runs/".concat(t.metadata.run_id);return Object(m.jsxs)("ul",{className:"list-unstyled",children:[Object(m.jsx)("li",{children:Object(m.jsxs)("small",{children:["last update:"," ",new Date(Date.parse(t.lastUpdate)).toLocaleString()]})}),Object(m.jsx)("li",{children:Object(m.jsxs)("small",{children:["last run id:"," ",Object(m.jsx)("a",{href:e,target:"_blank",className:"report-link",rel:"noreferrer",children:t.metadata.run_id})]})})]})}},{key:"renderTableData",value:function(t,e){var r=this;return this.sortTable(t,e).map((function(t,e){var a=t.statistic,s=t.metadata,n=a.total!==a.passed;return Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:r.renderReportLink(t,s,n)}),Object(m.jsx)("td",{children:r.renderResults(a)}),Object(m.jsx)("td",{children:r.renderMetadataCell(t)})]},e)}))}},{key:"renderTableHeader",value:function(t,e,r){var a={name:"report id",statistic:"results",lastUpdate:"most recent"},s=r?"sort-by-asc":"sort-by-desc",n=Object.keys(a).map((function(n,c){return Object(m.jsxs)(u.a,{variant:"dark",onClick:function(){t(n,!r)},children:[a[n].toUpperCase(),Object(m.jsx)("span",{className:e===n?s:""})]},c)}));return Object(m.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(m.jsxs)("div",{children:[this.state.data.reportsCount," reports"]}),Object(m.jsx)("div",{children:n})]})}},{key:"render",value:function(){return Object(m.jsxs)(h.a,{hover:!0,responsive:"sm",size:"sm",variant:"dark",id:"reportsTable",children:[Object(m.jsx)("caption",{children:Object(m.jsxs)("small",{children:["docs size: ",this.state.data.docsSize]})}),Object(m.jsxs)("thead",{children:[Object(m.jsx)("tr",{children:Object(m.jsx)("th",{colSpan:"3",children:Object(m.jsx)("h1",{className:"display-4",children:"Jetpack e2e test reports"})})}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{colSpan:"3",id:"sortButtons",children:this.renderTableHeader(this.updateSorting,this.state.sortBy,this.state.isSortAsc)})})]}),Object(m.jsx)("tbody",{children:this.renderTableData(this.state.sortBy,this.state.isSortAsc)})]})}}]),r}(s.a.Component);var O=function(){return Object(m.jsxs)("div",{className:"App",children:[Object(m.jsx)("header",{className:"App-header",children:"\xa0"}),Object(m.jsx)("div",{className:"App-content",children:Object(m.jsx)(f,{})}),Object(m.jsx)("footer",{className:"App-footer",children:Object(m.jsxs)("div",{children:[Object(m.jsx)("a",{target:"_blank",href:"https://github.com/Automattic/jetpack-e2e-reports/",rel:"noreferrer",children:"Code"})," \u2022 ",Object(m.jsx)("a",{target:"_blank",href:"https://github.com/Automattic/jetpack-e2e-reports/actions",rel:"noreferrer",children:"Actions"})]})})]})};c.a.render(Object(m.jsx)(s.a.StrictMode,{children:Object(m.jsx)(O,{})}),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.ab2b27d4.chunk.js.map