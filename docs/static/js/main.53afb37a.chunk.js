(this["webpackJsonpjetpack-e2e-reports"]=this["webpackJsonpjetpack-e2e-reports"]||[]).push([[0],{23:function(t){t.exports=JSON.parse('{"permanent":["master","atomic","gutenberg"],"masterRuns":["master","atomic","gutenberg"],"ignore":["static","e2e","data"]}')},50:function(t,e,s){},54:function(t,e,s){},69:function(t,e,s){"use strict";s.r(e);var a=s(0),r=s.n(a),n=s(25),c=s.n(n),i=(s(50),s(9)),o=(s(53),s(54),s(78)),l=s(79),u=s(80),d=s(16),h=s(11),j=s(12),p=s(14),b=s(13),f=s(23),m=s(75),O=s(76),x=s(77),v=s(38),y=s(28),k=s(15),g=s.n(k),N=s(1),D=function(t){Object(p.a)(s,t);var e=Object(b.a)(s);function s(){var t;Object(h.a)(this,s);for(var a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return(t=e.call.apply(e,[this].concat(r))).state={reports:t.props.reports,sort:{by:"lastUpdate",isAsc:!1}},t}return Object(j.a)(s,[{key:"componentDidMount",value:function(){this.sortTable(this.state.sort.by,this.state.sort.isAsc)}},{key:"sortTable",value:function(t,e){switch(this.setState({sort:{by:t,isAsc:e}}),t){case"name":return this.sortByName(e);case"lastUpdate":return this.sortByDate(e);case"statistic":return this.sortByStatus(e)}}},{key:"sortByDate",value:function(t){return this.state.reports.sort((function(e,s){return t?Date.parse(e.lastUpdate)-Date.parse(s.lastUpdate):Date.parse(s.lastUpdate)-Date.parse(e.lastUpdate)}))}},{key:"sortByName",value:function(t){return this.state.reports.sort((function(e,s){return t?e.name-s.name:s.name-e.name}))}},{key:"sortByStatus",value:function(t){return this.state.reports.sort((function(e,s){return t?e.statistic.failed+e.statistic.broken-(s.statistic.failed+s.statistic.broken):s.statistic.failed+s.statistic.broken-(e.statistic.failed+e.statistic.broken)}))}},{key:"getTableHeader",value:function(){var t,e,s=this,a={name:"report id",statistic:"no of failures",lastUpdate:"most recent"},r=this.state.sort.isAsc?"sort-by-asc":"sort-by-desc";return this.props.options.sortButtons&&(t=Object.keys(a).map((function(t,e){return Object(N.jsxs)(m.a,{variant:"dark",onClick:function(){s.sortTable(t,!s.state.sort.isAsc)},children:[a[t].toUpperCase(),Object(N.jsx)("span",{className:s.state.sort.by===t?r:""})]},e)}))),this.props.reportCount&&(e="".concat(this.state.reports.length," reports")),Object(N.jsx)("thead",{children:Object(N.jsx)("tr",{className:"headerRow",children:Object(N.jsx)("td",{colSpan:"3",className:"sort-buttons",children:Object(N.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(N.jsx)("div",{children:e}),Object(N.jsx)("div",{children:t})]})})})})}},{key:"getReportRow",value:function(t,e){var s=t.statistic,a=t.metadata,r=s.total!==s.passed+s.skipped;return Object(N.jsxs)("tr",{children:[Object(N.jsx)("td",{className:"reportNameCell",children:this.getReportLinkCell(t,a,r,s.total)}),Object(N.jsx)("td",{children:this.getTestResultsCell(s)}),Object(N.jsx)("td",{children:this.getMetadataCell(t)})]},e)}},{key:"getReportLinkCell",value:function(t,e,s,a){var r="https://automattic.github.io/jetpack-e2e-reports/".concat(t.name,"/report/"),n=t.name,c=t.name;if(e.pr_title){var o="(#".concat(e.pr_number,")");c="".concat(e.pr_title," ").concat(o)}var l="https://github.com/Automattic/jetpack/tree/".concat(e.branch),u="https://github.com/Automattic/jetpack/pull/".concat(e.pr_number),d=y.c,h="warning";return a>0&&(d=s?y.d:y.a,h=s?"failed":"passed"),Object(N.jsxs)("ul",{className:"list-unstyled",children:[Object(N.jsxs)("li",{children:[Object(N.jsx)(v.a,{className:h,icon:d}),"\xa0",Object(N.jsxs)("a",{href:r,className:"report-link",target:"_blank",rel:"noreferrer",onClick:function(){return i.a.pageview("/"+t.name)},children:[c,Object(N.jsx)("br",{})]})]}),Object(N.jsx)("li",{children:Object(N.jsxs)("small",{children:["#",n," "," \u2022 ",Object(N.jsx)(v.a,{icon:y.b})," ",Object(N.jsx)("a",{href:l,target:"_blank",className:"report-link",rel:"noreferrer",children:e.branch}),e.pr_number?" \u2022 ":"",e.pr_number&&Object(N.jsxs)("a",{href:u,target:"_blank",className:"report-link",rel:"noreferrer",children:["PR ",e.pr_number]})]})})]})}},{key:"getTestResultsCell",value:function(t){var e=["failed","passed","total"].map((function(e,s){var a="failed"===e?t[e]+t.broken:t[e];return Object(N.jsxs)(O.a,{className:"label label-status-".concat(e),children:[e," ",a]},s)}));return Object(N.jsx)("div",{children:e})}},{key:"getMetadataCell",value:function(t){var e="https://github.com/Automattic/jetpack/actions/runs/".concat(t.metadata.run_id);return Object(N.jsxs)("ul",{className:"list-unstyled",children:[Object(N.jsx)("li",{children:Object(N.jsxs)("small",{children:["last update: ",g()(t.lastUpdate).fromNow()]})}),Object(N.jsx)("li",{children:Object(N.jsxs)("small",{children:["last run id:"," ",Object(N.jsx)("a",{href:e,target:"_blank",className:"report-link",rel:"noreferrer",children:t.metadata.run_id})]})})]})}},{key:"render",value:function(){var t=this;return Object(N.jsxs)(x.a,{hover:!0,responsive:"sm",size:"sm",variant:"dark",className:"reportsTable",children:[this.getTableHeader(),Object(N.jsx)("tbody",{children:this.state.reports.map((function(e,s){return t.getReportRow(e,s)}))}),Object(N.jsx)("tfoot",{children:Object(N.jsx)("tr",{children:Object(N.jsx)("td",{colSpan:3})})})]})}}]),s}(r.a.Component),w=function(t){Object(p.a)(s,t);var e=Object(b.a)(s);function s(t){var a;return Object(h.a)(this,s),(a=e.call(this,t)).state={reports:[],pinnedReports:[],docsSize:void 0,reportsCount:void 0,isDataFetched:!1},a}return Object(j.a)(s,[{key:"componentDidMount",value:function(){var t=this;fetch("./data/reports.json",{headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(t){return t.json()})).then((function(e){var s,a={reports:[]},r={reports:[]},n=Object(d.a)(e.reports);try{for(n.s();!(s=n.n()).done;){var c=s.value;f.permanent.includes(c.name)?r.reports.push(c):a.reports.push(c)}}catch(i){n.e(i)}finally{n.f()}t.setState({reports:a.reports,pinnedReports:r.reports,docsSize:e.docsSize,reportsCount:e.reportsCount,isDataFetched:!0})})).catch(console.log),i.a.pageview("/reports")}},{key:"render",value:function(){return this.state.isDataFetched?Object(N.jsxs)("div",{children:[Object(N.jsxs)("div",{className:"reports-header",children:[this.state.reportsCount," reports"]}),Object(N.jsx)(D,{reports:this.state.pinnedReports,options:{reportCount:!1,sortButtons:!1}}),Object(N.jsx)(D,{reports:this.state.reports,options:{reportCount:!1,sortButtons:!0}}),Object(N.jsxs)("small",{className:"footnote",children:["docs size: ",this.state.docsSize]})]}):null}}]),s}(r.a.Component),S=s(45),A=s(4),C=s(10),R=s.n(C),M=s(18),T=s(24);function L(t){return E.apply(this,arguments)}function E(){return(E=Object(M.a)(R.a.mark((function t(e){var s;return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e);case 2:return(s=t.sent).ok||console.error("Error fetching data from ".concat(e," ").concat(s.status)),t.next=6,s.json();case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function B(t,e){var s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=t.sort((function(t,s){return t[e]>s[e]?1:s[e]>t[e]?-1:0}));return s?a.reverse():a}var _=function(t){Object(p.a)(s,t);var e=Object(b.a)(s);function s(){var t;Object(h.a)(this,s);for(var a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return(t=e.call.apply(e,[this].concat(r))).state={rawData:{testsData:{},dailyData:[]},tests:{list:[],distinctTests:0,totalTestResults:0,failedResults:0,failedRate:0},days:[],isMasterOnly:!1,sort:{by:"total",isAsc:!1},isDataReady:!1},t}return Object(j.a)(s,[{key:"componentDidMount",value:function(){var t=Object(M.a)(R.a.mark((function t(){return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this,t.next=3,L("./data/tests.json");case 3:return t.t1=t.sent,t.next=6,L("./data/daily.json");case 6:t.t2=t.sent,t.t3={testsData:t.t1,dailyData:t.t2},t.t4={rawData:t.t3},t.t0.setState.call(t.t0,t.t4),this.setTestsData(),this.setDailyStatsData(),this.setState({isDataReady:!0}),i.a.pageview("/tests");case 14:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(t,e){this.state.isMasterOnly!==e.isMasterOnly&&this.setTestsData(),this.state.sort!==e.sort&&this.sortData()}},{key:"setTestsData",value:function(){var t=JSON.parse(JSON.stringify(this.state.rawData.testsData.tests));this.state.isMasterOnly&&t.forEach((function(t){t.results=t.results.filter((function(t){return f.masterRuns.includes(t.report)}))})),t=t.filter((function(t){return t.results.length>0}));var e,s=Object(d.a)(t);try{for(s.s();!(e=s.n()).done;){var a=e.value;a.total=0;for(var r=function(){var t=c[n];a[t]=a.results.filter((function(e){return e.status===t})).length,a.total+=a[t]},n=0,c=["passed","failed","skipped"];n<c.length;n++)r();a.results.sort((function(t,e){return t.time-e.time}))}}catch(u){s.e(u)}finally{s.f()}var i=0,o=0;t.forEach((function(t){i+=t.total,o+=t.failed}));var l=(o/i).toFixed(2);this.setState({tests:{list:t,distinctTests:t.length,totalTestResults:i,failedResults:o,failedRate:l}}),this.sortData()}},{key:"sortData",value:function(){var t=this;switch(this.state.sort.by){case"total":this.state.tests.list.sort((function(e,s){return t.state.sort.isAsc?s.total-e.total:e.total-s.total}));break;case"failures":this.state.tests.list.sort((function(e,s){return t.state.sort.isAsc?s.failed-e.failed:e.failed-s.failed}))}}},{key:"setDailyStatsData",value:function(){var t=JSON.parse(JSON.stringify(this.state.rawData.dailyData));t.forEach((function(t){t.failedRate=(t.failed/t.total).toFixed(2)})),B(t,"time",!0),this.setState({days:t})}},{key:"chartOptions",value:function(){var t=this.state.days.map((function(t){return t.date}));return{grid:{left:50,right:50},dataZoom:[{type:"slider",startValue:t[t.length-14],endValue:t[t.length-1]}],tooltip:{trigger:"axis",axisPointer:{type:"cross"}},legend:{textStyle:{color:"#6b6d76"}},xAxis:[{type:"category",data:this.state.days.map((function(t){return t.date}))}],yAxis:[{type:"value",splitLine:{lineStyle:{type:"dotted",color:"#6b6d76"}}},{type:"value",splitLine:{lineStyle:{type:"dashed",color:"rgba(107,109,118,0.47)"}},min:0,axisLabel:{formatter:"{value} %"}}],series:[{name:"failure rate",type:"line",yAxisIndex:1,color:"#e38474",symbol:"roundRect",symbolSize:7,data:this.state.days.map((function(t){return t.failedRate}))},{name:"passed tests",type:"bar",stack:"1",emphasis:{focus:"series"},color:"rgba(115, 151, 75, 0.73)",data:this.state.days.map((function(t){return t.passed}))},{name:"failed tests",type:"bar",stack:"1",emphasis:{focus:"series"},color:"rgba(253, 90, 62, 0.71)",data:this.state.days.map((function(t){return t.failed}))},{name:"skipped tests",type:"bar",stack:"1",emphasis:{focus:"series"},color:"rgba(170, 170, 170, 0.73)",data:this.state.days.map((function(t){return t.skipped}))}]}}},{key:"getSortButtons",value:function(){var t=this,e={total:"most runs",failures:"most failures"},s=this.state.sort.isAsc?"sort-by-asc":"sort-by-desc";return Object.keys(e).map((function(a,r){return Object(N.jsxs)(m.a,{variant:"dark",onClick:function(){t.setState({sort:{by:a,isAsc:!t.state.sort.isAsc}})},children:[e[a].toUpperCase(),Object(N.jsx)("span",{className:t.state.sort.by===a?s:""})]},r)}))}},{key:"getTotalsBadges",value:function(t){var e=["failed","passed","skipped","total"].map((function(e,s){var a=t[e],r=0===a?"hide":"",n=(a/(t.total-("skipped"===e?0:t.skipped))*100).toFixed(1);return n="total"===e||isNaN(n)?"":"".concat(n,"%"),Object(N.jsx)("li",{children:Object(N.jsxs)(O.a,{className:"label label-fill label-status-".concat(e," ").concat(r),children:[a," ",e,Object(N.jsx)(O.a,{className:"badge-pill stat-pill",children:n})]},s)},s)}));return Object(N.jsx)("ul",{className:"list-unstyled",children:e})}},{key:"getResultsLine",value:function(t){var e=t.results.slice(-500).map((function(t,e){var s,a="no-source";return t.source&&(a="",s="".concat(t.report,"/report/#testresult/").concat(t.source.replace(/.json/,""))),Object(N.jsxs)(O.a,{onClick:function(){s&&window.open(s,"_blank")},className:"has-tooltip label label-small label-status-".concat(t.status," ").concat(a),children:["\xa0",Object(N.jsxs)("span",{className:"tooltip-content",children:[g()(t.time).format("MMM Do, h:mm a"),Object(N.jsx)("br",{}),t.source]})]},e)}));return Object(N.jsx)("div",{children:e})}},{key:"getTestContent",value:function(t,e){return Object(N.jsxs)("div",{className:"test-container",children:[Object(N.jsx)("div",{className:"row",children:Object(N.jsx)("div",{className:"col-sm-auto",children:Object(N.jsx)("h1",{children:t.name})})}),Object(N.jsxs)("div",{className:"row",children:[Object(N.jsx)("div",{className:"col-sm-auto",children:this.getTotalsBadges(t)}),Object(N.jsx)("div",{className:"col",children:this.getResultsLine(t)})]})]},e)}},{key:"render",value:function(){var t=this;return this.state.isDataReady?Object(N.jsxs)("div",{children:[Object(N.jsx)(T.a,{option:this.chartOptions()}),Object(N.jsx)("hr",{}),Object(N.jsxs)("div",{className:"row text-center",children:[Object(N.jsx)("div",{className:"col-sm",children:Object(N.jsxs)("div",{className:"stat-box",children:[Object(N.jsx)("span",{className:"stat-number",children:this.state.tests.distinctTests}),Object(N.jsx)("br",{}),Object(N.jsx)("span",{className:"stat-description",children:"tests"})]})}),Object(N.jsx)("div",{className:"col-sm",children:Object(N.jsxs)("div",{className:"stat-box",children:[Object(N.jsx)("span",{className:"stat-number",children:this.state.tests.totalTestResults}),Object(N.jsx)("br",{}),Object(N.jsx)("span",{className:"stat-description",children:"results"})]})}),Object(N.jsx)("div",{className:"col-sm",children:Object(N.jsxs)("div",{className:"stat-box",children:[Object(N.jsx)("span",{className:"stat-number",children:this.state.tests.failedResults}),Object(N.jsx)("br",{}),Object(N.jsx)("span",{className:"stat-description",children:"failures"})]})}),Object(N.jsx)("div",{className:"col-sm",children:Object(N.jsxs)("div",{className:"stat-box",children:[Object(N.jsxs)("span",{className:"stat-number",children:[this.state.tests.failedRate,"%"]}),Object(N.jsx)("br",{}),Object(N.jsx)("span",{className:"stat-description",children:"failure rate"})]})})]}),Object(N.jsx)("hr",{}),Object(N.jsxs)("div",{className:"row",children:[Object(N.jsx)("div",{className:"col-sm filters",children:Object(N.jsxs)("label",{htmlFor:"only-master",className:"checkbox-container",children:["only master",Object(N.jsx)("input",{type:"checkbox",id:"only-master",onChange:function(e){return t.setState({isMasterOnly:e.target.checked})}}),Object(N.jsx)("span",{className:"checkmark"})]})}),Object(N.jsx)("div",{className:"col-md sort-buttons",children:this.getSortButtons()})]}),Object(N.jsx)("hr",{}),Object(N.jsx)("div",{children:this.state.tests.list.map((function(e,s){return t.getTestContent(e,s)}))})]}):null}}]),s}(r.a.Component),F=s(33),U=function(t){Object(p.a)(s,t);var e=Object(b.a)(s);function s(){var t;Object(h.a)(this,s);for(var a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return(t=e.call.apply(e,[this].concat(r))).state={rawData:{errorsData:{},weeklyData:[]},errors:{list:[],totalErrors:0,distinctErrors:0},weeks:[],isMasterOnly:!1,sort:{by:"common",isAsc:!1},isDataReady:!1},t}return Object(j.a)(s,[{key:"componentDidMount",value:function(){var t=Object(M.a)(R.a.mark((function t(){return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this,t.next=3,L("./data/errors.json");case 3:return t.t1=t.sent,t.next=6,L("./data/weekly.json");case 6:t.t2=t.sent,t.t3={errorsData:t.t1,weeklyData:t.t2},t.t4={rawData:t.t3},t.t0.setState.call(t.t0,t.t4),this.setErrorsData(),this.setWeeklyStatsData(),this.setState({isDataReady:!0}),i.a.pageview("/failures");case 14:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(t,e){this.state.isMasterOnly!==e.isMasterOnly&&this.setErrorsData(),this.state.sort!==e.sort&&this.sortData()}},{key:"setErrorsData",value:function(){var t=JSON.parse(JSON.stringify(this.state.rawData.errorsData.errors));this.state.isMasterOnly&&t.forEach((function(t){t.results=t.results.filter((function(t){return f.masterRuns.includes(t.report)}))})),t=t.filter((function(t){return t.results.length>0}));var e,s=Object(d.a)(t);try{for(s.s();!(e=s.n()).done;){var a=e.value;a.total=a.results.length;var r=a.results.map((function(t){return t.time}));a.newest=Math.max.apply(Math,Object(F.a)(r)),a.oldest=Math.min.apply(Math,Object(F.a)(r));var n=Object(F.a)(new Set(a.results.map((function(t){return t.test}))));a.tests=[];var c,i=Object(d.a)(n);try{var o=function(){var t=c.value,e=a.results.filter((function(e){return e.test===t}));a.tests.push({name:t,times:e.map((function(t){return t.time}))})};for(i.s();!(c=i.n()).done;)o()}catch(u){i.e(u)}finally{i.f()}}}catch(u){s.e(u)}finally{s.f()}var l=t.map((function(t){return t.results})).flat();this.setState({errors:{list:t,distinctErrors:t.length,totalErrors:l.length}}),this.sortData()}},{key:"sortData",value:function(){var t=this;switch(this.state.sort.by){case"recent":this.state.errors.list.sort((function(e,s){return t.state.sort.isAsc?e.newest-s.newest:s.newest-e.newest}));break;case"common":this.state.errors.list.sort((function(e,s){return t.state.sort.isAsc?e.results.length-s.results.length:s.results.length-e.results.length}))}}},{key:"setWeeklyStatsData",value:function(){var t=JSON.parse(JSON.stringify(this.state.rawData.weeklyData));t.forEach((function(t){t.failedRate=(t.failed/t.total).toFixed(2)})),B(t,"date"),this.setState({weeks:t})}},{key:"getListOfTests",value:function(t){return Object(N.jsx)("div",{children:t.map((function(t,e){return Object(N.jsxs)(O.a,{className:"label label-status-skipped",children:[t.name," ",Object(N.jsx)(O.a,{className:"badge-pill stat-pill",children:t.times.length})]},e)}))})}},{key:"getListOfFailures",value:function(t){return Object(N.jsx)("div",{children:t.map((function(t,e){var s=g()(t.time).format("MMM Do, h:mm a"),a="no-source";if(t.source){var r="".concat(t.report,"/report/#testresult/").concat(t.source.replace(/.json/,""));s=Object(N.jsx)("a",{href:r,target:"_blank",rel:"noreferrer",className:"report-link",children:s}),a=""}return Object(N.jsx)("span",{className:"failure-link ".concat(a),children:s},e)}))})}},{key:"getErrorContent",value:function(t,e){var s="".concat(t.total," times, since ").concat(g()(t.oldest).fromNow(),". Last failed ").concat(g()(t.newest).fromNow());return 1===t.total&&(s="once, ".concat(g()(t.oldest).fromNow())),Object(N.jsxs)("div",{className:"error-container",children:[Object(N.jsxs)("div",{className:"row",children:[Object(N.jsx)("pre",{className:"error-container-trace",children:t.trace}),Object(N.jsx)("div",{children:s})]}),Object(N.jsx)("div",{className:"row",children:this.getListOfTests(t.tests)}),Object(N.jsx)("div",{className:"row",children:this.getListOfFailures(t.results)})]},e)}},{key:"getSortButtons",value:function(){var t=this,e={recent:"most recent",common:"most common"},s=this.state.sort.isAsc?"sort-by-asc":"sort-by-desc";return Object.keys(e).map((function(a,r){return Object(N.jsxs)(m.a,{variant:"dark",onClick:function(){t.setState({sort:{by:a,isAsc:!t.state.sort.isAsc}})},children:[e[a].toUpperCase(),Object(N.jsx)("span",{className:t.state.sort.by===a?s:""})]},r)}))}},{key:"chartOptions",value:function(){return{grid:{left:50,right:50},tooltip:{trigger:"axis",axisPointer:{type:"cross"}},legend:{textStyle:{color:"#6b6d76"}},xAxis:[{type:"category",data:this.state.weeks.map((function(t){return t.date}))}],yAxis:[{type:"value",splitLine:{lineStyle:{type:"dotted",color:"#6b6d76"}}},{type:"value",splitLine:{lineStyle:{type:"dashed",color:"#6b6d76"}},min:0,axisLabel:{formatter:"{value} %"}}],series:[{name:"failure rate",type:"line",yAxisIndex:1,color:"#e38474",symbol:"roundRect",symbolSize:7,data:this.state.weeks.map((function(t){return t.failedRate}))},{name:"failed tests",type:"bar",emphasis:{focus:"series"},color:"#fd5a3e",data:this.state.weeks.map((function(t){return t.failed}))}]}}},{key:"render",value:function(){var t=this;if(!this.state.isDataReady)return null;var e=g()(this.state.rawData.errorsData.lastUpdate).fromNow();return Object(N.jsxs)("div",{children:[Object(N.jsx)(T.a,{option:this.chartOptions()}),Object(N.jsx)("hr",{}),Object(N.jsxs)("div",{className:"row text-center",children:[Object(N.jsx)("div",{className:"col-sm",children:Object(N.jsxs)("div",{className:"stat-box",children:[Object(N.jsx)("span",{className:"stat-number",children:this.state.errors.totalErrors}),Object(N.jsx)("br",{}),Object(N.jsx)("span",{className:"stat-description",children:"total errors"})]})}),Object(N.jsx)("div",{className:"col-sm",children:Object(N.jsxs)("div",{className:"stat-box",children:[Object(N.jsx)("span",{className:"stat-number",children:this.state.errors.distinctErrors}),Object(N.jsx)("br",{}),Object(N.jsx)("span",{className:"stat-description",children:"distinct errors"})]})})]}),Object(N.jsx)("hr",{}),Object(N.jsxs)("div",{className:"row",children:[Object(N.jsx)("div",{className:"col-sm filters",children:Object(N.jsxs)("label",{htmlFor:"only-master",className:"checkbox-container",children:["only master",Object(N.jsx)("input",{type:"checkbox",id:"only-master",onChange:function(e){return t.setState({isMasterOnly:e.target.checked})}}),Object(N.jsx)("span",{className:"checkmark"})]})}),Object(N.jsx)("div",{className:"col-md sort-buttons",children:this.getSortButtons()})]}),Object(N.jsx)("hr",{}),Object(N.jsx)("div",{children:this.state.errors.list.map((function(e,s){return t.getErrorContent(e,s)}))}),Object(N.jsx)("div",{className:"row",children:Object(N.jsxs)("div",{className:"text-right col small",children:["updated ",e]})})]})}}]),s}(r.a.Component),J=s(20),z=function(t){Object(p.a)(s,t);var e=Object(b.a)(s);function s(t){var a;return Object(h.a)(this,s),(a=e.call(this,t)).state={rawData:[],isDataFetched:!1},a}return Object(j.a)(s,[{key:"prepareChartData",value:function(t){var e={},s={};return t.forEach((function(t){var e=new Date(t.date);e=e.toISOString().split("T")[0],s[e]||(s[e]=[]);var a=Object.keys(t.baseAvg).reduce((function(e,s){var a;return e[s]=(a=t.baseAvg[s],100*(t.jetpackAvg[s]/a-1)),e}),{});s[e].push(a)})),Object.entries(s).forEach((function(t){var s=Object(J.a)(t,2),a=s[0],r=s[1],n=r.length;e[a]={date:a},Object.keys(r[0]).forEach((function(t){e[a][t]=r.reduce((function(e,s){return e+s[t]}),0),e[a][t]/=n,e[a][t]=Math.round(100*e[a][t])/100}))})),Object.values(e)}},{key:"componentDidMount",value:function(){var t=Object(M.a)(R.a.mark((function t(){var e=this;return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("./data/perf-metrics.json",{headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(t){return t.json()})).then((function(t){e.setState({rawData:t,isDataFetched:!0})})).catch(console.log);case 2:i.a.pageview("performance");case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){if(!this.state.isDataFetched)return null;var t=this.prepareChartData(this.state.rawData),e={grid:{left:40,right:0},tooltip:{trigger:"axis",axisPointer:{type:"cross"}},legend:{textStyle:{color:"#6b6d76"}},xAxis:[{type:"category",data:t.map((function(t){return t.date}))}],yAxis:[{type:"value",splitLine:{lineStyle:{type:"dotted",color:"#6b6d76"}}},{type:"value",splitLine:{lineStyle:{type:"dashed",color:"rgba(107,109,118,0.47)"}},min:0,axisLabel:{formatter:"{value} %"}}],dataZoom:[{type:"inside",start:70,end:100},{start:70,end:100}],series:[{name:"loaded",type:"bar",emphasis:{focus:"series"},color:"rgba(115, 151, 75, 0.73)",data:t.map((function(t){return t.loaded}))},{name:"firstContentfulPaint",type:"bar",emphasis:{focus:"series"},color:"rgba(0,123,255,0.73)",data:t.map((function(t){return t.firstContentfulPaint}))},{name:"type",type:"bar",emphasis:{focus:"series"},color:"rgba(253,90,62,0.71)",data:t.map((function(t){return t.type}))},{name:"focus",type:"bar",emphasis:{focus:"series"},color:"rgb(107,109,118)",data:t.map((function(t){return t.focus}))},{name:"inserterOpen",type:"bar",emphasis:{focus:"series"},color:"rgb(160,248,228)",data:t.map((function(t){return t.inserterOpen}))}]};return Object(N.jsxs)("div",{children:[Object(N.jsx)("h4",{children:"Performance metrics"}),Object(N.jsx)(T.a,{option:e})]})}}]),s}(r.a.Component);i.a.initialize("UA-208890082-1");var P=function(){var t="/jetpack-e2e-reports";return Object(N.jsxs)(o.a,{fluid:!0,className:"App",children:[Object(N.jsxs)("div",{className:"App-content",children:[Object(N.jsx)(l.a,{variant:"dark",expand:"md",className:"app-nav-bar",children:Object(N.jsxs)(o.a,{fluid:!0,className:"app-nav-bar-inner-container",children:[Object(N.jsx)(l.a.Brand,{href:"".concat(t,"/#/"),children:"Jetpack test dashboard"}),Object(N.jsx)(l.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(N.jsx)(l.a.Collapse,{id:"basic-navbar-nav",children:Object(N.jsxs)(u.a,{activeKey:location.pathname,className:"ml-auto",children:[Object(N.jsx)(u.a.Link,{href:"".concat(t,"/#/reports"),children:"Reports"}),Object(N.jsx)(u.a.Link,{href:"".concat(t,"/#/tests"),children:"Tests"}),Object(N.jsx)(u.a.Link,{href:"".concat(t,"/#/failures"),children:"Failures"}),Object(N.jsx)(u.a.Link,{href:"".concat(t,"/#/performance"),children:"Performance"})]})})]})}),Object(N.jsx)(S.a,{children:Object(N.jsxs)(A.c,{children:[Object(N.jsx)(A.a,{exact:!0,path:"/",element:Object(N.jsx)(w,{})}),Object(N.jsx)(A.a,{exact:!0,path:"/reports",element:Object(N.jsx)(w,{})}),Object(N.jsx)(A.a,{exact:!0,path:"/tests",element:Object(N.jsx)(_,{})}),Object(N.jsx)(A.a,{exact:!0,path:"/failures",element:Object(N.jsx)(U,{})}),Object(N.jsx)(A.a,{exact:!0,path:"/performance",element:Object(N.jsx)(z,{})})]})})]}),Object(N.jsx)("footer",{className:"App-footer",children:Object(N.jsxs)("div",{children:[Object(N.jsx)("a",{target:"_blank",href:"https://github.com/Automattic/jetpack-e2e-reports/",rel:"noreferrer",children:"Code"})," \u2022 ",Object(N.jsx)("a",{target:"_blank",href:"https://github.com/Automattic/jetpack-e2e-reports/actions",rel:"noreferrer",children:"Actions"})]})})]})};c.a.render(Object(N.jsx)(r.a.StrictMode,{children:Object(N.jsx)(P,{})}),document.getElementById("root"))}},[[69,1,2]]]);
//# sourceMappingURL=main.53afb37a.chunk.js.map