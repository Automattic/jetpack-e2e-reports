{"version":3,"sources":["ReportsTable.js","App.js","index.js"],"names":["ReportsTable","props","updateSorting","sortBy","sortDirection","setState","state","Table","bordered","variant","id","renderTableHeader","this","renderTableData","React","Component","sortTable","direction","console","log","Data","reports","sort","r1","r2","name","sortAlphabetically","Date","parse","lastUpdate","sortByDate","statistic","failed","broken","sortByStatus","reportLink","report","str","linkUrl","isNaN","parseFloat","href","className","statusLabel","isFailed","total","passed","counts","map","label","count","OverlayTrigger","placement","delay","show","hide","overlay","Tooltip","capitalize","dateString","toLocaleString","head","Object","keys","klass","key","index","onClick","replace","toUpperCase","s","charAt","slice","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.ecac30d5.chunk.js","sourcesContent":["import { Table, OverlayTrigger, Tooltip } from 'react-bootstrap';\nimport React from 'react';\n\nimport Data from './summary.json';\n\nexport default class ReportsTable extends React.Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\t\tthis.state = { sortBy: 'name', sortDirection: true };\n\t}\n\n\tupdateSorting = ( sortBy, sortDirection ) =>\n\t\tthis.setState( { sortBy, sortDirection } );\n\n\trender() {\n\t\treturn (\n\t\t\t<Table bordered variant=\"dark\" id=\"reportsTable\">\n\t\t\t\t<thead>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t{ renderTableHeader(\n\t\t\t\t\t\t\tthis.updateSorting,\n\t\t\t\t\t\t\tthis.state.sortBy,\n\t\t\t\t\t\t\tthis.state.sortDirection\n\t\t\t\t\t\t) }\n\t\t\t\t\t</tr>\n\t\t\t\t</thead>\n\t\t\t\t<tbody>\n\t\t\t\t\t{ renderTableData(\n\t\t\t\t\t\tthis.state.sortBy,\n\t\t\t\t\t\tthis.state.sortDirection\n\t\t\t\t\t) }\n\t\t\t\t</tbody>\n\t\t\t</Table>\n\t\t);\n\t}\n}\n\nfunction sortTable( sortBy, direction ) {\n\tconsole.log( '!!!!!', sortBy, direction );\n\tswitch ( sortBy ) {\n\t\tcase 'name':\n\t\t\treturn sortAlphabetically( direction );\n\t\tcase 'lastUpdate':\n\t\t\treturn sortByDate( direction );\n\t\tcase 'statistic':\n\t\t\treturn sortByStatus( direction );\n\t}\n}\n\nfunction sortByDate( direction ) {\n\treturn Data.reports.sort( ( r1, r2 ) => {\n\t\tif ( direction ) {\n\t\t\treturn Date.parse( r1.lastUpdate ) - Date.parse( r2.lastUpdate );\n\t\t}\n\t\treturn Date.parse( r2.lastUpdate ) - Date.parse( r1.lastUpdate );\n\t} );\n}\n\nfunction sortAlphabetically( direction ) {\n\treturn Data.reports.sort( ( r1, r2 ) =>\n\t\tdirection ? r1.name - r2.name : r2.name - r1.name\n\t);\n}\n\nfunction sortByStatus( direction ) {\n\treturn Data.reports.sort( ( r1, r2 ) => {\n\t\tif ( direction ) {\n\t\t\treturn (\n\t\t\t\tr1.statistic.failed +\n\t\t\t\tr1.statistic.broken -\n\t\t\t\t( r2.statistic.failed + r2.statistic.broken )\n\t\t\t);\n\t\t}\n\t\treturn (\n\t\t\tr2.statistic.failed +\n\t\t\tr2.statistic.broken -\n\t\t\t( r1.statistic.failed + r1.statistic.broken )\n\t\t);\n\t} );\n}\n\nfunction reportLink( report ) {\n\tconst linkUrl = `https://automattic.github.io/jetpack-e2e-reports/${ report.name }/report/`;\n\n\tlet name = `Branch: ${ report.name }`;\n\tif ( isNumeric( report.name ) ) {\n\t\tname = `PR #${ report.name }`;\n\t}\n\treturn (\n\t\t<a href={ linkUrl } className=\"App-link\">\n\t\t\t{ name }\n\t\t</a>\n\t);\n}\n\nfunction statusLabel( statistic ) {\n\tconst isFailed = statistic.total !== statistic.passed;\n\n\tconst counts = [ 'failed', 'passed', 'total' ].map( ( label, id ) => {\n\t\tconst count =\n\t\t\tlabel === 'failed'\n\t\t\t\t? statistic[ label ] + statistic.broken\n\t\t\t\t: statistic[ label ];\n\t\treturn (\n\t\t\t<OverlayTrigger\n\t\t\t\tkey={ id }\n\t\t\t\tplacement=\"right\"\n\t\t\t\tdelay={ { show: 250, hide: 400 } }\n\t\t\t\toverlay={\n\t\t\t\t\t<Tooltip id={ `tooltip-${ label }` }>\n\t\t\t\t\t\t{ capitalize( label ) + ' tests' }\n\t\t\t\t\t</Tooltip>\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t<span className={ `label label-status-${ label }` }>\n\t\t\t\t\t{ count }\n\t\t\t\t</span>\n\t\t\t</OverlayTrigger>\n\t\t);\n\t} );\n\n\treturn (\n\t\t<div>\n\t\t\t<span>{ `Tests ${ isFailed ? 'failed' : 'passed' }: ` }</span>\n\t\t\t{ counts }\n\t\t</div>\n\t);\n}\n\nconst localeDate = ( dateString ) =>\n\tnew Date( Date.parse( dateString ) ).toLocaleString();\n\nfunction renderTableData( sortBy, sortDirection ) {\n\tconst reports = sortTable( sortBy, sortDirection );\n\treturn reports.map( ( report, id ) => {\n\t\tconst { lastUpdate, statistic } = report; //destructuring\n\t\treturn (\n\t\t\t<tr key={ id }>\n\t\t\t\t<td>{ reportLink( report ) }</td>\n\t\t\t\t<td>{ localeDate( lastUpdate ) }</td>\n\t\t\t\t<td>{ statusLabel( statistic ) }</td>\n\t\t\t</tr>\n\t\t);\n\t} );\n}\n\nfunction renderTableHeader( updateSorting, sortBy, sortDirection ) {\n\tconst head = Object.keys( Data.reports[ 0 ] );\n\n\tconst klass = sortDirection ? 'sort-by-asc' : 'sort-by-desc';\n\treturn head.map( ( key, index ) => {\n\t\treturn (\n\t\t\t<th\n\t\t\t\tkey={ index }\n\t\t\t\tonClick={ () => {\n\t\t\t\t\tupdateSorting( key, ! sortDirection );\n\t\t\t\t} }\n\t\t\t>\n\t\t\t\t{ key.replace( /([a-z0-9])([A-Z])/g, '$1 $2' ).toUpperCase() }\n\t\t\t\t<span className={ sortBy === key ? klass : '' } />\n\t\t\t</th>\n\t\t);\n\t} );\n}\n\n// ========================================\n// Some helper functions\n\nconst capitalize = ( s ) => s.charAt( 0 ).toUpperCase() + s.slice( 1 );\n\nfunction isNumeric( str ) {\n\tif ( typeof str !== 'string' ) return false; // we only process strings!\n\treturn (\n\t\t! isNaN( str ) && // use type coercion to parse the _entirety_ of the string (`parseFloat` alone does not do this)...\n\t\t! isNaN( parseFloat( str ) )\n\t); // ...and ensure strings of whitespace fail\n}\n","import 'bootstrap/dist/css/bootstrap.min.css';\nimport './App.css';\nimport ReportsTable from './ReportsTable';\n\nfunction reportsList() {\n\treturn (\n\t\t<div className=\"App-content\">\n\t\t\t<ReportsTable />\n\t\t</div>\n\t);\n}\n\nfunction header() {\n\treturn <header className=\"App-header\">This is header</header>;\n}\n\nfunction footer() {\n\treturn <footer className=\"App-footer\">This is footer</footer>;\n}\n\nfunction App() {\n\treturn (\n\t\t<div className=\"App\">\n\t\t\t{ header() }\n\t\t\t{ reportsList() }\n\t\t\t{ footer() }\n\t\t</div>\n\t);\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<App />\n\t</React.StrictMode>,\n\tdocument.getElementById( 'root' )\n);\n"],"sourceRoot":""}